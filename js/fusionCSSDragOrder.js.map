{"mappings":"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","sources":["js/src/fusionCSSDragOrder.js"],"sourcesContent":["/**\n * JavaScript to allow drag ordering of elements, works with jQuery or fusionLib.\n *\n * THIS SOFTWARE IS PROVIDED \"AS IS\" AND WITHOUT ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.\n *\n * @package fusionCSS\n * @copyright Copyright (c) 2018 - 2019 fusionCSS. All rights reserved.\n * @link http://fusionCSS.com\n */\n\n(function() {\n\n\t$.fn.extend({\n\t\t/**\n\t\t * Make the selected element a container for dragable elements.\n\t\t *\n\t\t * @param opts { offset, handler }\n\t\t */\n\t\tmakeDragContainer: function(opts) {\n\t\t\topts = opts || {};\n\t\t\topts.dragMarkerClass = opts.dragMarkerClass || 'dragMarker';\n\t\t\topts.dragItemClass = opts.dragItemClass || 'dragItem';\n\t\t\topts.dragDraggingClass = opts.dragDraggingClass || 'dragDragging';\n\t\t\topts.disableDragInto = opts.disableDragInto || false;\n\t\t\topts.dragTopOnly = opts.dragTopOnly || false;\n\n\t\t\treturn this.each(function() {\n\t\t\t\tvar dragContainer = $(this),\n\t\t\t\t\tdragElement = null,\n\t\t\t\t\tdragMarker,\n\t\t\t\t\tdragX,\n\t\t\t\t\tdragY,\n\t\t\t\t\tdragOffsetX = 0,\n\t\t\t\t\tdragOffsetY = 0,\n\t\t\t\t\tdropTarget = null,\n\t\t\t\t\tdropPosition = null,\n\t\t\t\t\tscrollTimer = null,\n\t\t\t\t\tscrollWhat = null,\n\t\t\t\t\tscrollStepY,\n\t\t\t\t\tlastMoveEvent,\n\t\t\t\t\tuseContainerScroll = false;\n\n\t\t\t\t// Add a container for the element being dragged\n\t\t\t\tif(!dragContainer.find('.' + opts.dragMarkerClass).length)\n\t\t\t\t\tdragContainer.append('<div class=\"' + opts.dragMarkerClass + '\" style=\"display: none;\"></div>');\n\n\t\t\t\t// Mark the drag items\n\t\t\t\tif(opts.dragTopOnly) {\n\t\t\t\t\tvar list = dragContainer.find('ul');\n\t\t\t\t\tif(!list.length)\n\t\t\t\t\t\tlist = dragContainer.find('ol');\n\t\t\t\t\tlist.first().children().addClass(opts.dragItemClass);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tdragContainer.find('li').addClass(opts.dragItemClass);\n\n\t\t\t\t// Test if the list is a direct child of the container\n\t\t\t\tif(dragContainer.find('li').parent().parent()[0] === dragContainer[0]) {\n\t\t\t\t\tuseContainerScroll = true;\n\t\t\t\t}\n\n\t\t\t\t// Add handlers\n\t\t\t\tdragContainer\n\t\t\t\t\t.on('mousedown', dragStart)\n\t\t\t\t\t.on('touchstart', dragStart);\n\n\t\t\t\t// Catch escape key\n\t\t\t\t$(document).on('keyup', function(evt) {\n\t\t\t\t\tif(dragElement && evt.key === 'Escape') {\n\t\t\t\t\t\tdragEnd(evt);\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * Handle the start of the drag process.\n\t\t\t\t *\n\t\t\t\t * @param {Object} e\n\t\t\t\t */\n\t\t\t\tfunction dragStart(e) {\n\t\t\t\t\tvar target = $(e.target),\n\t\t\t\t\t\tel = target.closest('.' + opts.dragItemClass),\n\t\t\t\t\t\tcOffset = dragContainer.offset();\n\n\t\t\t\t\t// If have and element then start the drag as long as it's not a link\n\t\t\t\t\tif(!target.closest('a').length && el.length) {\n\t\t\t\t\t\tif (e.touches && e.touches.length) {\n\t\t\t\t\t\t\tdragX = e.touches[0].pageX;\n\t\t\t\t\t\t\tdragY = e.touches[0].pageY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tdragX = e.pageX;\n\t\t\t\t\t\t\tdragY = e.pageY;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Calculate the offset for dragging\n\t\t\t\t\t\tdragOffsetX = dragX - el.offset().left;\n\t\t\t\t\t\tdragOffsetY = dragY - el.offset().top;\n\n\t\t\t\t\t\t// Normalise mouse to container\n\t\t\t\t\t\tdragX -= cOffset.left;\n\t\t\t\t\t\tdragY -= cOffset.top;\n\t\t\t\t\t\tif(useContainerScroll) {\n\t\t\t\t\t\t\tdragX += dragContainer.scrollLeft();\n\t\t\t\t\t\t\tdragY += dragContainer.scrollTop();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar d = {\n\t\t\t\t\t\t\tdragging: el,\n\t\t\t\t\t\t\teventTarget: target,\n\t\t\t\t\t\t\tallowDrag: true\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tdragContainer.trigger('draggingStart', d);\n\t\t\t\t\t\tif(d.allowDrag) {\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tdragElement = el;\n\t\t\t\t\t\t\tdragElement.addClass(opts.dragDraggingClass);\n\t\t\t\t\t\t\tdropTarget = dropPosition = null;\n\n\t\t\t\t\t\t\t// Setup the drag marker\n\t\t\t\t\t\t\tdragMarker = dragContainer.find('.' + opts.dragMarkerClass);\n\n\t\t\t\t\t\t\tif(opts.copyFunction)\n\t\t\t\t\t\t\t\topts.copyFunction(dragMarker, dragElement);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tdragMarker.html(dragElement.html());\n\n\t\t\t\t\t\t\tdragMarker\n\t\t\t\t\t\t\t\t.css('left', dragX - dragOffsetX + 'px')\n\t\t\t\t\t\t\t\t.css('top', dragY - dragOffsetY + 'px')\n\t\t\t\t\t\t\t\t.width(dragElement.outerWidth(true));\n\n\t\t\t\t\t\t\t// Enable handlers\n\t\t\t\t\t\t\tdragContainer\n\t\t\t\t\t\t\t\t.on('mousemove', dragMove)\n\t\t\t\t\t\t\t\t.on('touchmove', dragMove)\n\t\t\t\t\t\t\t\t.on('mouseup', dragEnd)\n\t\t\t\t\t\t\t\t.on('touchend', dragEnd);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Auto scroll\n\t\t\t\t */\n\t\t\t\tfunction autoScroll() {\n\t\t\t\t\tscrollWhat.scrollTop(scrollWhat.scrollTop() + scrollStepY);\n\t\t\t\t\tdragMove(lastMoveEvent);\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Start auto scroller.\n\t\t\t\t *\n\t\t\t\t * @param {object} what The element to scroll.\n\t\t\t\t * @param {number} stepY The step direction.\n\t\t\t\t */\n\t\t\t\tfunction startAutoScroll(what, stepY) {\n\t\t\t\t\tif(stepY) {\n\t\t\t\t\t\t// If what has changed then stop auto scroll\n\t\t\t\t\t\tif(scrollTimer && what[0] != scrollWhat[0])\n\t\t\t\t\t\t\tstopAutoScroll();\n\n\t\t\t\t\t\tscrollWhat = what;\n\t\t\t\t\t\tscrollStepY = stepY * 2;\n\t\t\t\t\t\tif(scrollTimer === null) {\n\t\t\t\t\t\t\tscrollTimer = window.setInterval(autoScroll, 15);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(scrollTimer)\n\t\t\t\t\t\tstopAutoScroll();\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Stop the auto scroller\n\t\t\t\t */\n\t\t\t\tfunction stopAutoScroll() {\n\t\t\t\t\tif(scrollTimer !== null) {\n\t\t\t\t\t\twindow.clearInterval(scrollTimer);\n\t\t\t\t\t\tscrollTimer = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Handle the drag move.\n\t\t\t\t *\n\t\t\t\t * @param {Object} e\n\t\t\t\t */\n\t\t\t\tfunction dragMove(e) {\n\t\t\t\t\tvar x, y,\n\t\t\t\t\t\tcx, cy,\n\t\t\t\t\t\tcOffset = dragContainer.offset(),\n\t\t\t\t\t\trect = dragContainer[0].getBoundingClientRect();\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tlastMoveEvent = e;\n\n\t\t\t\t\tif (e.touches && e.touches.length) {\n\t\t\t\t\t\tx = e.touches[0].pageX;\n\t\t\t\t\t\ty = e.touches[0].pageY;\n\t\t\t\t\t\tcx = e.touches[0].clientX;\n\t\t\t\t\t\tcy = e.touches[0].clientY;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tx = e.pageX;\n\t\t\t\t\t\ty = e.pageY;\n\t\t\t\t\t\tcx = e.clientX;\n\t\t\t\t\t\tcy = e.clientY;\n\t\t\t\t\t}\n\n\t\t\t\t\tx -= cOffset.left;\n\t\t\t\t\ty -= cOffset.top;\n\n\t\t\t\t\tif(useContainerScroll) {\n\t\t\t\t\t\tx += dragContainer.scrollLeft();\n\t\t\t\t\t\ty += dragContainer.scrollTop();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if still in container\n\t\t\t\t\tif(cx <= Math.ceil(rect.left + 2) || cx >= Math.floor(rect.right - 2) ||\n\t\t\t\t\t\tcy <= Math.ceil(rect.top + 2) || cy >= Math.floor(rect.bottom - 2)) {\n\t\t\t\t\t\tdragEnd(e);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdragMarker\n\t\t\t\t\t\t\t.css('left', x - dragOffsetX + 'px')\n\t\t\t\t\t\t\t.css('top', y - dragOffsetY + 'px');\n\n\t\t\t\t\t\t// Get the element under the marker\n\t\t\t\t\t\tdragMarker.hide();\n\t\t\t\t\t\tvar el = document.elementFromPoint(cx, cy);\n\t\t\t\t\t\tel = $(el).closest('.' + opts.dragItemClass);\n\t\t\t\t\t\tif(el.length && !el.hasClass(opts.dragDraggingClass) && !el.closest('.' + opts.dragDraggingClass).length) {\n\t\t\t\t\t\t\tvar dx = Math.abs(dragX - x),\n\t\t\t\t\t\t\t\tdy = Math.abs(dragY - y);\n\n\t\t\t\t\t\t\t// Get the rectangle for the element\n\t\t\t\t\t\t\tvar rectOvr = el[0].getBoundingClientRect(),\n\t\t\t\t\t\t\t\tallowDropOn = true;\n\n\t\t\t\t\t\t\tif(opts.disableDragInto || (opts.disableDropOn && el.attr(opts.disableDropOn) === 'true'))\n\t\t\t\t\t\t\t\tallowDropOn = false;\n\n\t\t\t\t\t\t\t// Build event data\n\t\t\t\t\t\t\tvar d = {\n\t\t\t\t\t\t\t\tdragging: dragElement,\n\t\t\t\t\t\t\t\tdropTarget: el,\n\t\t\t\t\t\t\t\tdropPosition: 'on',\n\t\t\t\t\t\t\t\tallowPosition: true\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// If dx dominant the compare on horizontal\n\t\t\t\t\t\t\tif(dx > dy) {\n\t\t\t\t\t\t\t\tvar w = allowDropOn ? rectOvr.width / 3 : rectOvr.width / 2;\n\t\t\t\t\t\t\t\tif(cx > (rectOvr.right - w)) {\n\t\t\t\t\t\t\t\t\tdragElement.css('opacity', 1);\n\t\t\t\t\t\t\t\t\tdropPosition = 'after';\n\n\t\t\t\t\t\t\t\t\t// If not already the next element\n\t\t\t\t\t\t\t\t\tif(el.next()[0] !== dragElement[0]) {\n\t\t\t\t\t\t\t\t\t\tdragContainer.trigger('draggingOver', d);\n\t\t\t\t\t\t\t\t\t\tif(d.allowPosition) {\n\t\t\t\t\t\t\t\t\t\t\tdragElement.remove();\n\t\t\t\t\t\t\t\t\t\t\tdragElement.insertAfter(el);\n\n\t\t\t\t\t\t\t\t\t\t\tdragX = x;\n\t\t\t\t\t\t\t\t\t\t\tdragY = y;\n\n\t\t\t\t\t\t\t\t\t\t\tdropTarget = el;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(cx < (rectOvr.left + w)) {\n\t\t\t\t\t\t\t\t\tdragElement.css('opacity', 1);\n\t\t\t\t\t\t\t\t\tdropPosition = 'before';\n\n\t\t\t\t\t\t\t\t\t// If not already the previous element\n\t\t\t\t\t\t\t\t\tif(el.prev()[0] !== dragElement[0]) {\n\t\t\t\t\t\t\t\t\t\tdragContainer.trigger('draggingOver', d);\n\t\t\t\t\t\t\t\t\t\tif(d.allowPosition) {\n\t\t\t\t\t\t\t\t\t\t\tdragElement.remove();\n\t\t\t\t\t\t\t\t\t\t\tdragElement.insertBefore(el);\n\n\t\t\t\t\t\t\t\t\t\t\tdragX = x;\n\t\t\t\t\t\t\t\t\t\t\tdragY = y;\n\n\t\t\t\t\t\t\t\t\t\t\tdropTarget = el;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(allowDropOn && (el[0] !== dragElement[0] || dropPosition !== 'on')) {\n\t\t\t\t\t\t\t\t\tdragContainer.trigger('draggingOver', d);\n\t\t\t\t\t\t\t\t\tif(d.allowPosition) {\n\t\t\t\t\t\t\t\t\t\tdropPosition = 'on';\n\t\t\t\t\t\t\t\t\t\tdragElement.css('opacity', .2);\n\t\t\t\t\t\t\t\t\t\tdropTarget = el;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Else Y direction is dominant so compare vertical\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvar h = allowDropOn ? rectOvr.height / 3 : rectOvr.height / 2;\n\t\t\t\t\t\t\t\tif(cy > (rectOvr.bottom - h)) {\n\t\t\t\t\t\t\t\t\tdragElement.css('opacity', 1);\n\t\t\t\t\t\t\t\t\tdropPosition = 'after';\n\n\t\t\t\t\t\t\t\t\t// If not already the next element\n\t\t\t\t\t\t\t\t\tif(el.next()[0] !== dragElement[0]) {\n\t\t\t\t\t\t\t\t\t\tdragContainer.trigger('draggingOver', d);\n\t\t\t\t\t\t\t\t\t\tif(d.allowPosition) {\n\t\t\t\t\t\t\t\t\t\t\tdragElement.remove();\n\t\t\t\t\t\t\t\t\t\t\tdragElement.insertAfter(el);\n\n\t\t\t\t\t\t\t\t\t\t\tdragX = x;\n\t\t\t\t\t\t\t\t\t\t\tdragY = y;\n\n\t\t\t\t\t\t\t\t\t\t\tdropTarget = el;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(cy < (rectOvr.top + h)) {\n\t\t\t\t\t\t\t\t\tdragElement.css('opacity', 1);\n\t\t\t\t\t\t\t\t\tdropPosition = 'before';\n\n\t\t\t\t\t\t\t\t\t// If not already the previous element\n\t\t\t\t\t\t\t\t\tif(el.prev()[0] !== dragElement[0]) {\n\t\t\t\t\t\t\t\t\t\tdragContainer.trigger('draggingOver', d);\n\t\t\t\t\t\t\t\t\t\tif(d.allowPosition) {\n\t\t\t\t\t\t\t\t\t\t\tdragElement.remove();\n\t\t\t\t\t\t\t\t\t\t\tdragElement.insertBefore(el);\n\n\t\t\t\t\t\t\t\t\t\t\tdragX = x;\n\t\t\t\t\t\t\t\t\t\t\tdragY = y;\n\n\t\t\t\t\t\t\t\t\t\t\tdropTarget = el;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(allowDropOn && (el[0] !== dragElement[0] || dropPosition !== 'on')) {\n\t\t\t\t\t\t\t\t\tdragContainer.trigger('draggingOver', d);\n\t\t\t\t\t\t\t\t\tif(d.allowPosition) {\n\t\t\t\t\t\t\t\t\t\tdropPosition = 'on';\n\t\t\t\t\t\t\t\t\t\tdragElement.css('opacity', .2);\n\t\t\t\t\t\t\t\t\t\tdropTarget = el;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdragMarker.show();\n\n\t\t\t\t\t\t// If container off screen then scroll window else container\n\t\t\t\t\t\tvar within = 30;\n\t\t\t\t\t\tif(\n\t\t\t\t\t\t\t(rect.top < 0 || rect.bottom > $(window).height()) &&\n\t\t\t\t\t\t\t(cy < within || cy > ($(window).height() - within))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif(cy < within)\n\t\t\t\t\t\t\t\tstartAutoScroll($(window), -1);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tstartAutoScroll($(window), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif(cy < rect.top + within)\n\t\t\t\t\t\t\t\tstartAutoScroll(dragContainer, -1);\n\t\t\t\t\t\t\telse if(cy > rect.bottom - within)\n\t\t\t\t\t\t\t\tstartAutoScroll(dragContainer, 1);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tstopAutoScroll();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Handle the end of the drag.\n\t\t\t\t *\n\t\t\t\t * @param {Object} e\n\t\t\t\t */\n\t\t\t\tfunction dragEnd(e) {\n\t\t\t\t\tif(dragElement) {\n\t\t\t\t\t\tdragElement.css('opacity', 1);\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t// Disable handlers\n\t\t\t\t\t\tdragContainer\n\t\t\t\t\t\t\t.off('mousemove', dragMove)\n\t\t\t\t\t\t\t.off('touchmove', dragMove)\n\t\t\t\t\t\t\t.off('mouseup', dragEnd)\n\t\t\t\t\t\t\t.off('touchend', dragEnd);\n\n\t\t\t\t\t\tstopAutoScroll();\n\n\t\t\t\t\t\tdragMarker.hide();\n\t\t\t\t\t\tdragElement.removeClass(opts.dragDraggingClass);\n\t\t\t\t\t\tvar d = {\n\t\t\t\t\t\t\tdragging: dragElement,\n\t\t\t\t\t\t\tdropTarget: dropPosition === null ? null : dropTarget,\n\t\t\t\t\t\t\tdropPosition: dropPosition\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdragElement = null;\n\t\t\t\t\t\tdragContainer.trigger('draggingEnd', d);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n})();\n"],"names":["$","fn","extend","makeDragContainer","opts","dragMarkerClass","dragItemClass","dragDraggingClass","disableDragInto","dragTopOnly","this","each","dragMarker","dragX","dragY","scrollStepY","lastMoveEvent","dragContainer","dragElement","dragOffsetX","dragOffsetY","dropTarget","dropPosition","scrollTimer","scrollWhat","useContainerScroll","find","length","append","list","first","children","addClass","dragStart","e","target","el","closest","cOffset","offset","touches","pageX","pageY","left","top","scrollLeft","scrollTop","d","dragging","eventTarget","allowDrag","trigger","preventDefault","copyFunction","html","css","width","outerWidth","on","dragMove","dragEnd","autoScroll","startAutoScroll","what","stepY","stopAutoScroll","window","setInterval","clearInterval","x","y","cx","cy","rect","getBoundingClientRect","stopPropagation","clientX","clientY","Math","ceil","floor","right","bottom","hide","document","elementFromPoint","hasClass","dx","abs","dy","rectOvr","allowDropOn","disableDropOn","attr","allowPosition","w","next","remove","insertAfter","prev","insertBefore","h","height","show","off","removeClass","parent","evt","key"],"version":3,"file":"fusionCSSDragOrder.js.map"}