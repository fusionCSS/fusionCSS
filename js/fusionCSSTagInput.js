/**
 * Copyright (c) 2013 - 2019 fusionCSS. All rights reserved.
 * @link http://fusionCSS.com
 * @version 3.2.0
 */
!function(){function r(t,a,e){a.val(""),$("#"+a.attr("id")+"_tagInputWidget .tag").remove();for(var i=e.split(a.attr("data-delimiter")),n=0;n<i.length;n++)l(t,a,i[n],!1);return a}function l(t,a,e,i){if((e=e.trim()).length){var n=a.val().split(a.attr("data-delimiter"));tagInput=$("#"+a.attr("id")+"_tagInput"),""==n[0]&&(n=new Array),d=e,-1<(r=a).val().split(r.attr("data-delimiter")).indexOf(d)?tagInput.addClass("invalidTag"):(tagInput.removeClass("invalidTag").val(""),$(t.tagHTML.replace(/\{value\}/g,(l=e,String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")))).insertBefore(tagInput),i?tagInput.focus():tagInput.blur(),n.push(e),a.val(n.join(a.attr("data-delimiter"))))}var l,r,d}function d(t,a,e){var i=a.attr("data-delimiter"),n=a.val().split(i),l=n.indexOf(e);-1<l&&(n.splice(l,1),r(t,a,n.join(i)))}$.fn.extend({setTags:function(t){return r(this,t)},enableTagInput:function(t){var n=$.extend({tagHTML:'<div class="chip tag"><span class="tagValue">{value}</span><i class="tagDelete">x</i></div>',widgetHTML:'<div id="{id}_tagInputWidget" class="tagInputWidget"><input id="{id}_tagInput" class="tagInput" value="" placeholder="{placeholder}" /></div>'},t);return this.each(function(){var e=$(this),a=e.attr("id"),i=e.attr("data-delimiter");e.attr("data-init-done")||(e.attr("data-init-done","1").hide(),$(n.widgetHTML.replace(/\{id\}/g,a).replace(/\{placeholder\}/g,e.attr("data-placeholder"))).insertAfter(e),r(n,e,e.val()),$("#"+a+"_tagInputWidget").on("click",function(t){$(t.target).closest(".tagDelete").length?(t.preventDefault(),d(n,e,$(t.target).closest(".tag").find(".tagValue").text())):$("#"+a+"_tagInput").focus()}),$("#"+a+"_tagInput").on("blur",function(t){l(n,e,$("#"+a+"_tagInput").val(),!0)}).on("keydown",function(t){var a=$(this);a.removeClass("invalidTag"),"Enter"===t.key||t.key===i?(t.preventDefault(),l(n,e,a.val(),!0)):"Backspace"===t.key&&""===a.val()&&(t.preventDefault(),d(n,e,a.closest(".tagInputWidget").find(".tag").last().find(".tagValue").text()),a.focus())}))})}})}();